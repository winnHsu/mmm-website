"use strict";(self.webpackChunksolanum=self.webpackChunksolanum||[]).push([[294],{294:(e,t,s)=>{s.a(e,async(e,i)=>{try{s.d(t,{default:()=>h});const{default:e}=await s.e(387).then(s.bind(s,387)),{default:n}=await s.e(954).then(s.bind(s,954)),{delegateEventListener:l}=await s.e(449).then(s.bind(s,449)),o={stackable:!1,mediaQuery:null,lockScroll:!0};class h{constructor(e,t={}){this.bindMethods(),this.id=e.id,this.element=e,this.options={...o,...t},this.attributes={role:this.element.getAttribute("role")??"dialog","aria-modal":this.element.getAttribute("aria-modal")??"true",tabindex:this.element.getAttribute("tabindex")??-1,inert:this.element.inert},this.options.mediaQuery?(this.options.mediaQuery.addEventListener("change",()=>this.options.mediaQuery.matches?this.enable():this.disable()),this.options.mediaQuery.dispatchEvent(new Event("change"))):this.enable(),l(document,"click",`[data-open="${this.id}"]`,this.open),l(document,"click",`[data-close="${this.id}"]`,this.close),this.options.stackable||addEventListener("opening",e=>{e.target!==this.element&&this.isOpened&&this.close()}),e.overlay=this}bindMethods(){this.handleKeyPress=this.handleKeyPress.bind(this),this.handleFocus=this.handleFocus.bind(this),this.trapFocus=this.trapFocus.bind(this),this.toggle=this.toggle.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}get isOpened(){return!this.element.inert}get canLockScroll(){return!0===this.options.lockScroll||"object"==typeof this.options.lockScroll&&this.options.lockScroll instanceof MediaQueryList&&this.options.lockScroll.matches}enable(){for(const[e,t]of Object.entries(this.attributes))null!==t&&this.element.setAttribute(e,t);this.isOpened&&this.canLockScroll&&e.lock()}disable(){this.isOpened&&this.canLockScroll&&e.unlock(),this.attributes.inert=this.element.inert?"":null,Object.keys(this.attributes).forEach(e=>this.element.removeAttribute(e))}dispatchEvent(e,t={}){this.element.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0}))}handleKeyPress(e){if("Escape"==e.key)return this.close()}handleFocus(e){if(!this.isOpened||this.element.contains(e.target))return;const t=n.getFocusableElements(this.element);e.relatedTarget!==t[0]&&e.relatedTarget!==this.element?e.relatedTarget!==t[t.length-1]||t[0].focus({preventScroll:!0}):t[t.length-1].focus({preventScroll:!0})}trapFocus(){this.returnFocusTo=document.activeElement,this.element.addEventListener("keydown",this.handleKeyPress),addEventListener("focusin",this.handleFocus),this.element.focus({preventScroll:!0})}releaseFocus(){this.element.removeEventListener("keydown",this.handleKeyPress),removeEventListener("focusin",this.handleFocus),this.returnFocusTo&&(this.returnFocusTo.focus({preventScroll:!0}),this.returnFocusTo=null)}toggle(){this.isOpened?this.close():this.open()}open(t){t&&t.preventDefault&&t.preventDefault(),this.element.inert=!1,this.dispatchEvent("opening",{id:this.id}),this.trapFocus(),this.canLockScroll&&e.lock(),this.dispatchEvent("opened",{id:this.id})}close(t){t&&t.preventDefault&&t.preventDefault(),this.isOpened&&(this.dispatchEvent("closing",{id:this.id}),this.releaseFocus(),this.canLockScroll&&e.unlock(),this.element.inert=!0,this.dispatchEvent("closed",{id:this.id}))}}i()}catch(e){i(e)}},1)}}]);